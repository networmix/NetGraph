seed: 42

blueprints:
  Clos_4_2:
    groups:
      spine:
        node_count: 2
        name_template: spine{node_num}
        attrs:
          role: spine
          hw_type: router_chassis
          tier: spine
      leaf:
        node_count: 4
        name_template: leaf{node_num}
        attrs:
          role: core
          hw_type: router_chassis
          tier: leaf
          hw_component: CoreRouter
    adjacency:
      - source: /leaf
        target: /spine
        pattern: mesh
        link_params:
          capacity: 3200
          cost: 0.1
          attrs:
            link_type: leaf_spine

  DCRegion:
    groups:
      dc:
        node_count: 1
        name_template: dc
        attrs:
          role: dc
          hw_type: dc_node
    adjacency: []

components:
  CoreRouter:
    component_type: chassis
    description: 16 slot, 36x800G ports per slot, 576 ports total
    cost: 650000.0
    power_watts: 23000.0
    power_watts_max: 30000.0
    capacity: 460800.0
    ports: 576
    attrs:
      role: core

network:
  groups:
    metro1/pop[1-1]:
      use_blueprint: Clos_4_2
      attrs:
        node_type: pop
    metro1/dc[1-1]:
      use_blueprint: DCRegion
      attrs:
        node_type: dc_region
    metro2/pop[1-1]:
      use_blueprint: Clos_4_2
      attrs:
        node_type: pop
    metro2/dc[1-1]:
      use_blueprint: DCRegion
      attrs:
        node_type: dc_region
    metro3/pop[1-1]:
      use_blueprint: Clos_4_2
      attrs:
        node_type: pop
    metro3/dc[1-1]:
      use_blueprint: DCRegion
      attrs:
        node_type: dc_region
    metro4/pop[1-1]:
      use_blueprint: Clos_4_2
      attrs:
        node_type: pop
    metro4/dc[1-1]:
      use_blueprint: DCRegion
      attrs:
        node_type: dc_region

workflow:
  - step_type: NetworkStats
    name: network_statistics
  - step_type: CapacityEnvelopeAnalysis
    name: capacity_envelope
    source_path: (metro[0-9]+/dc[0-9]+)
    sink_path: (metro[0-9]+/dc[0-9]+)
    mode: pairwise
    parallelism: 1
    shortest_path: false
    flow_placement: PROPORTIONAL
    seed: 42
    iterations: 1
    baseline: false
    store_failure_patterns: false
    include_flow_summary: false
