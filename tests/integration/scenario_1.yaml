# Test scenario 1: 6-node L3 US backbone network
# Tests basic single link failure scenarios
seed: 1001

network:
  name: "6-node-l3-us-backbone"
  version: "1.0"

  nodes:
    SEA:
      attrs:
        coords: [47.6062, -122.3321]
    SFO:
      attrs:
        coords: [37.7749, -122.4194]
    DEN:
      attrs:
        coords: [39.7392, -104.9903]
    DFW:
      attrs:
        coords: [32.8998, -97.0403]
    JFK:
      attrs:
        coords: [40.641766, -73.780968]
    DCA:
      attrs:
        coords: [38.907192, -77.036871]

  links:
    # West -> Middle
    - source: SEA
      target: DEN
      capacity: 200
      cost: 6846
      attrs:
        distance_km: 1369.13

    - source: SFO
      target: DEN
      capacity: 200
      cost: 7754
      attrs:
        distance_km: 1550.77

    - source: SEA
      target: DFW
      capacity: 200
      cost: 9600
      attrs:
        distance_km: 1920

    - source: SFO
      target: DFW
      capacity: 200
      cost: 10000
      attrs:
        distance_km: 2000

    # Middle <-> Middle (two parallel links to represent redundancy)
    - source: DEN
      target: DFW
      capacity: 400
      cost: 7102
      attrs:
        distance_km: 1420.28

    - source: DEN
      target: DFW
      capacity: 400
      cost: 7102
      attrs:
        distance_km: 1420.28

    # Middle -> East
    - source: DEN
      target: JFK
      capacity: 200
      cost: 7500
      attrs:
        distance_km: 1500

    - source: DFW
      target: DCA
      capacity: 200
      cost: 8000
      attrs:
        distance_km: 1600

    - source: DFW
      target: JFK
      capacity: 200
      cost: 9500
      attrs:
        distance_km: 1900

    # East <-> East
    - source: JFK
      target: DCA
      capacity: 100
      cost: 1714
      attrs:
        distance_km: 342.69

failures:
  default:
    attrs:
      description: "Evaluate traffic routing under any single link failure."
    modes:
      - weight: 1.0
        rules:
          - scope: "link"
            mode: "choice"
            count: 1

demands:
  default:
    - source: SEA
      target: JFK
      volume: 50
    - source: SFO
      target: DCA
      volume: 50
    - source: SEA
      target: DCA
      volume: 50
    - source: SFO
      target: JFK
      volume: 50

workflow:
  - type: BuildGraph
    name: build_graph
